# ============================================================
# DEVICE — CYD 3-BUTTON PANEL (Network-only bring-up)
# ============================================================

substitutions:
  # Logging inherits default INFO from the universal base.
  # For troubleshooting, temporarily set per-device to DEBUG, then revert.
  #log_level: INFO

  # ----------------------------------------------------------
  # DEVICE IDENTITY
  # ----------------------------------------------------------
  device_id: cyd_display_1
  device_hostname: "cyd-display-1"
  device_friendly_name: "CYD Display 1"
  device_description: "Network-only bring-up (no display/touch)"

  # OTA/uploader target address (used by override include)
  wifi_use_address: "192.168.1.129"

packages:
  # ----------------------------------------------------------
  # BASE + PLATFORM
  # (assumes these define esphome/wifi/api/ota/logger basics)
  # ----------------------------------------------------------
  base: !include common/universal_base.yaml
  board: !include common/platforms/esp32.yaml
  fleet: !include fleets/cyd_panel.yaml

  # ----------------------------------------------------------
  # NETWORK OVERRIDES (optional, per-device)
  # ----------------------------------------------------------
  net_perf: !include common/overrides/wifi_performance.yaml
  #net_use_address: !include common/overrides/wifi_use_address.yaml

  # ----------------------------------------------------------
  # CAPABILITIES
  # ----------------------------------------------------------
  diagnostics: !include common/capabilities/diagnostics.yaml

# No SPI/display/touch here — we’re just proving network stability.

output:
  - platform: ledc
    pin: GPIO21
    id: lcd_backlight
    frequency: 5000 Hz

light:
  - platform: monochromatic
    id: cyd_backlight
    output: lcd_backlight
    name: "CYD Backlight"
    default_transition_length: 0s
    restore_mode: ALWAYS_ON

test_buttons: !include common/capabilities/test/system_buttons.yaml
