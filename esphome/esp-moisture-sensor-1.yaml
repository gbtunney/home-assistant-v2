# ============================================================
# DEVICE — GENERIC MOISTURE SENSOR
# ============================================================
#
# This is a DEPLOYED device file.
# It lives at the root of the ESPHome config directory so it
# appears in the ESPHome add-on UI.
#
# Role:
# - Soil moisture monitoring
# - Bluetooth Proxy infrastructure
# - Standard diagnostics
#
# ============================================================

substitutions:
  log_level: VERY_VERBOSE
  ota_password: "d610ed309a79c724406c68c094316693"

  # ----------------------------------------------------------
  # DEVICE IDENTITY
  # ----------------------------------------------------------
  device_id: moisture_sensor_1
  device_hostname: "moisture-sensor-1"
  device_friendly_name: "Moisture Sensor 1"
  device_description: "Generic soil moisture sensor with BLE proxy."

  # ----------------------------------------------------------
  # MOISTURE SENSOR CONFIGURATION
  # ----------------------------------------------------------
  moisture_probe_id: "moisture_probe_1"
  moisture_probe_name: "Moisture Probe 1"
  moisture_probe_pin: "GPIO32"

packages:
  # ----------------------------------------------------------
  # BASE + FLEET
  # ----------------------------------------------------------
  base: !include common/universal_base.yaml
  board: !include common/platforms/esp32.yaml
  fleet: !include fleets/moisture_sensor.yaml
  # NETWORK (Wi‑Fi inherited from base; DHCP by default — no static IP)
  net_perf: !include common/overrides/wifi_performance.yaml
  # Optional later: target a specific uploader address
  # net_use_address: !include common/overrides/wifi_use_address.yaml

  # ----------------------------------------------------------
  # CAPABILITIES
  # ----------------------------------------------------------
  diagnostics: !include common/capabilities/diagnostics.yaml
  ble: !include common/capabilities/bluetooth_proxy.yaml
  moisture_sensor: !include common/capabilities/moisture_probe.yaml

captive_portal:
  # captive_portal is inherited from the base; this duplicate is optional.
  # captive_portal:
